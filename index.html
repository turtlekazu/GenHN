<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSS Gen Garden | Acephale OS</title>
    
    <style id="generated-style"></style>

    <style>
        /* OS自体のUI（ここだけは固定） */
        .os-controls {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: #222;
            color: white;
            padding: 1rem;
            display: flex;
            gap: 1rem;
            z-index: 9999;
            box-shadow: 0 -4px 10px rgba(0,0,0,0.3);
            font-family: sans-serif;
        }
        .os-input {
            flex: 1;
            padding: 0.5rem;
            border-radius: 4px;
            border: none;
        }
        .os-btn {
            padding: 0.5rem 1rem;
            background: #6200ea;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
        }
        .os-btn:hover { background: #7c43bd; }
        
        /* コンテンツエリアに余白を空ける（OSパネルとかぶらないように） */
        body { margin-bottom: 100px; }
    </style>
</head>
<body>

    <div id="app-root">
        <header class="app-header">
            <h1 class="app-title">Acephale Task</h1>
            <div class="user-status">Online</div>
        </header>

        <main class="board">
            <ul class="task-list">
                <li class="task-item" data-priority="high" data-status="pending">
                    <div class="task-content">
                        <span class="task-tag">Urgent</span>
                        <h2 class="task-title">投資家向けデモ作成</h2>
                        <p class="task-desc">HTMLとCSSの完全分離を証明する。</p>
                        <time>Due: Tomorrow</time>
                    </div>
                    <div class="task-actions">
                        <button>Done</button>
                    </div>
                </li>

                <li class="task-item" data-priority="normal" data-status="pending">
                    <div class="task-content">
                        <span class="task-tag">Dev</span>
                        <h2 class="task-title">API接続テスト</h2>
                        <p class="task-desc">OpenAIへのリクエスト処理の実装。</p>
                        <time>Due: Next Week</time>
                    </div>
                    <div class="task-actions">
                        <button>Done</button>
                    </div>
                </li>

                <li class="task-item" data-priority="low" data-status="completed">
                    <div class="task-content">
                        <span class="task-tag">Life</span>
                        <h2 class="task-title">コーヒー豆を買う</h2>
                        <time>Done: Today</time>
                    </div>
                    <div class="task-actions">
                        <button>Delete</button>
                    </div>
                </li>
            </ul>
        </main>
    </div>
    <div class="os-controls">
        <input type="text" class="os-input" id="prompt-input" 
               placeholder="AIへの指示: 「レトロ」「禅」「モダン」「サイバー」などと入力...">
        <button class="os-btn" id="generate-btn">Generate UI</button>
    </div>


    <script>
        // 1. 要素の取得
        const styleTag = document.getElementById('generated-style');
        const promptInput = document.getElementById('prompt-input');
        const generateBtn = document.getElementById('generate-btn');

        // 2. プリセットCSS (AIの代わり)
        const presets = {
            
            // Style A: 80年代レトロフューチャー
            "レトロ": `
                body { background-color: #000; color: #0f0; font-family: 'Courier New', monospace; padding: 20px; }
                .app-header { border-bottom: 2px dashed #0f0; margin-bottom: 20px; display: flex; justify-content: space-between; }
                .task-list { list-style: none; padding: 0; }
                .task-item { border: 1px solid #0f0; margin-bottom: 10px; padding: 10px; position: relative; }
                .task-item[data-priority="high"] { border: 2px solid red; color: red; }
                .task-item[data-priority="high"] .task-title:before { content: "!! WARNING !! "; }
                button { background: #000; color: #0f0; border: 1px solid #0f0; cursor: pointer; text-transform: uppercase; }
                button:hover { background: #0f0; color: #000; }
                .task-tag { border: 1px solid currentColor; padding: 2px 5px; font-size: 0.8em; margin-right: 10px; }
            `,

            // Style B: 禅・ミニマリスト
            "禅": `
                body { background-color: #f4f1ea; color: #5d5d5d; font-family: 'Georgia', serif; display: flex; justify-content: center; }
                #app-root { max-width: 600px; width: 100%; padding: 40px; }
                .app-header { text-align: center; margin-bottom: 60px; }
                .app-title { font-weight: normal; letter-spacing: 0.2em; border-bottom: 1px solid #ddd; padding-bottom: 20px; display: inline-block; }
                .task-list { list-style: none; padding: 0; }
                .task-item { padding: 20px 0; border-bottom: 1px solid #e0e0e0; transition: 0.3s; }
                .task-item:hover { transform: translateX(10px); }
                .task-title { font-size: 1.2rem; font-weight: normal; margin: 0 0 5px 0; }
                .task-tag, .user-status { display: none; } /* 不要な情報は隠す */
                button { background: none; border: none; color: #aaa; font-size: 0.9rem; cursor: pointer; float: right; }
                button:hover { color: #333; }
                .task-item[data-status="completed"] { opacity: 0.3; text-decoration: line-through; }
            `,

            // Style C: サイバーパンク / グリッチ
            "サイバー": `
                body { background-color: #050505; color: #00e5ff; font-family: sans-serif; perspective: 1000px; overflow-x: hidden; }
                #app-root { transform: rotateX(5deg); transform-origin: center top; margin: 20px; }
                .app-title { font-size: 3rem; text-transform: uppercase; text-shadow: 2px 2px 0px #ff00ff; margin: 0; }
                .task-list { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; list-style: none; padding: 0; margin-top: 40px; }
                .task-item { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); padding: 20px; clip-path: polygon(10% 0, 100% 0, 100% 90%, 90% 100%, 0 100%, 0 10%); transition: 0.2s; }
                .task-item:hover { background: rgba(0, 229, 255, 0.1); border-color: #00e5ff; transform: scale(1.05); box-shadow: 0 0 20px rgba(0, 229, 255, 0.5); }
                .task-item[data-priority="high"] { border-color: #ff0055; color: #ff0055; box-shadow: inset 0 0 10px #ff0055; animation: pulse 1s infinite; }
                @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.7; } 100% { opacity: 1; } }
                button { width: 100%; margin-top: 10px; background: transparent; border: 1px solid currentColor; color: inherit; padding: 10px; font-weight: bold; cursor: pointer; }
                button:hover { background: currentColor; color: #000; }
            `,

            // Style D: ブルータリスト（モダン・大胆）
            "モダン": `
                body { background-color: #ffcc00; color: #000; font-family: 'Helvetica Neue', sans-serif; padding: 20px; }
                .app-header { border: 4px solid #000; background: #fff; padding: 20px; margin-bottom: 20px; box-shadow: 8px 8px 0 #000; }
                .app-title { margin: 0; font-size: 2.5rem; text-transform: uppercase; font-weight: 900; }
                .task-list { list-style: none; padding: 0; }
                .task-item { background: #fff; border: 4px solid #000; margin-bottom: 15px; padding: 20px; box-shadow: 8px 8px 0 #000; display: flex; align-items: center; justify-content: space-between; }
                .task-title { font-weight: 900; font-size: 1.5rem; margin: 0; }
                .task-tag { background: #000; color: #fff; padding: 5px 10px; font-weight: bold; margin-right: 10px; }
                button { background: #000; color: #fff; border: none; padding: 10px 20px; font-weight: bold; font-size: 1rem; cursor: pointer; transition: 0.1s; }
                button:active { transform: translate(4px, 4px); }
            `
        };

        // 3. 生成ロジック (イベントリスナー)
        generateBtn.addEventListener('click', () => {
            const input = promptInput.value;
            let foundStyle = null;

            // キーワードマッチング (簡易AI)
            if (input.includes("レトロ")) foundStyle = presets["レトロ"];
            else if (input.includes("禅")) foundStyle = presets["禅"];
            else if (input.includes("サイバー")) foundStyle = presets["サイバー"];
            else if (input.includes("モダン")) foundStyle = presets["モダン"];
            
            // Hitした場合
            if (foundStyle) {
                // ここが「置換」の瞬間！
                // 既存のCSSを全て消し去り、新しいCSSを注入する
                styleTag.textContent = foundStyle;
                
                console.log(`Injecting Style: ${input}`);
            } else {
                alert("デモ用のキーワードを入力してください：\n「レトロ」「禅」「サイバー」「モダン」");
            }
        });

        // 4. (Future) 本物のAIに繋ぐ場合のコードイメージ
        /*
        async function fetchAIStyle(prompt) {
            const response = await fetch('https://api.openai.com/v1/chat/completions', {
                method: 'POST',
                headers: { 'Authorization': 'Bearer YOUR_KEY' },
                body: JSON.stringify({
                    model: "gpt-4",
                    messages: [{
                        role: "system",
                        content: "あなたはCSSジェネレーターです。以下のHTML構造に対して、ユーザーの要望に沿ったCSSのみを出力してください..."
                    }, {
                        role: "user",
                        content: prompt
                    }]
                })
            });
            // ... parse and inject ...
        }
        */
    </script>
</body>
</html>